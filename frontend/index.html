<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="img/favicon-32x32.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>minimumpad - Editor de Textos Online</title>
    <!-- Google tag (gtag.js) - Usado para o Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z2KWW8B11Z"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-Z2KWW8B11Z');
    </script>
    <!-- Final da Tag Google Analytics-->

    <!-- importar css main -->
    <link rel="stylesheet" type="text/css" href="css/main.css">

    <!-- importar js main -->
    <script type="text/javascript" src="js/main.js"></script>


</head>

<body>

    <header>
        <div class="social-links">
            <a href="https://github.com/victoorvieira/minimumpad" target="_blank"><img width="35px"
                    src="img/icons8-github-100.png"></a>
        </div>
    </header>

    <main>
        <h1>minimumpad</h1>
        <p>Edite textos online de forma simples e eficiente!</p>
        <button class="button-4" role="button" id="createNoteBtn">Comece a escrever!</button>
        <button class="button-4" role="button" id="searchNoteBtn" onclick="showBox()"><img width="15px"
                src="img/icons8-search-50.png"></button>

    </main>

    <div class="searchBox" id="searchBox">
        <textarea class="searchBoxTxt" id="inputTexto"></textarea>
        <button class="searchBoxBtn" role="button" id="searchNoteBtnSend"><img width="15px"
                src="img/icons8-search-50.png"></button>
        <button class="searchBoxBtn" role="button" id="searchNoteBtnSend" onclick="closeBox()">X</button>
    </div>

    <!-- Mapeamento de listeners para os botoes
    
    TODO: Revisar e usar esse processamento dentro do arquivo main.css
    
    -->
    <script>

        const noteIdSrc = document.getElementById("inputTexto").value;

        document.getElementById('createNoteBtn').addEventListener('click', async () => {
            const response = await fetch('https://minimumpad.com/tomcat/api/notes', { method: 'POST' });
            const { url } = await response.json();
            window.location.href = `note.html?note=${url}`;
        });

        document.getElementById('searchNoteBtnSend').addEventListener('click', async () => {
            window.open(`http://localhost/note.html?note=` + document.getElementById("inputTexto").value, '_blank').focus();
        });


        


    </script>



</body>

</html>